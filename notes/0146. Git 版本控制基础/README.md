# [0146. Git ç‰ˆæœ¬æ§åˆ¶åŸºç¡€](https://github.com/tnotesjs/TNotes.react/tree/main/notes/0146.%20Git%20%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%E5%9F%BA%E7%A1%80)

<!-- region:toc -->

- [1. ğŸ¯ æœ¬èŠ‚å†…å®¹](#1--æœ¬èŠ‚å†…å®¹)
- [2. ğŸ«§ è¯„ä»·](#2--è¯„ä»·)
- [3. ğŸ¤” ä¸ºä»€ä¹ˆ React é¡¹ç›®éœ€è¦ç‰ˆæœ¬æ§åˆ¶ï¼Ÿ](#3--ä¸ºä»€ä¹ˆ-react-é¡¹ç›®éœ€è¦ç‰ˆæœ¬æ§åˆ¶)
- [4. ğŸ¤” Git çš„åŸºæœ¬å·¥ä½œæµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ](#4--git-çš„åŸºæœ¬å·¥ä½œæµç¨‹æ˜¯ä»€ä¹ˆ)
- [5. ğŸ¤” å¦‚ä½•åˆå§‹åŒ–ä¸€ä¸ª Git ä»“åº“ï¼Ÿ](#5--å¦‚ä½•åˆå§‹åŒ–ä¸€ä¸ª-git-ä»“åº“)
- [6. ğŸ¤” å¦‚ä½•æš‚å­˜å’Œæäº¤ä»£ç ï¼Ÿ](#6--å¦‚ä½•æš‚å­˜å’Œæäº¤ä»£ç )
- [7. ğŸ¤” å¦‚ä½•æŸ¥çœ‹æäº¤å†å²ï¼Ÿ](#7--å¦‚ä½•æŸ¥çœ‹æäº¤å†å²)
- [8. ğŸ¤” å¦‚ä½•åˆ›å»ºå’Œåˆ‡æ¢åˆ†æ”¯ï¼Ÿ](#8--å¦‚ä½•åˆ›å»ºå’Œåˆ‡æ¢åˆ†æ”¯)
- [9. ğŸ¤” å¦‚ä½•åˆå¹¶åˆ†æ”¯ï¼Ÿ](#9--å¦‚ä½•åˆå¹¶åˆ†æ”¯)
- [10. ğŸ¤” å¦‚ä½•è¿æ¥è¿œç¨‹ä»“åº“ï¼Ÿ](#10--å¦‚ä½•è¿æ¥è¿œç¨‹ä»“åº“)
- [11. ğŸ¤” å¦‚ä½•æ¨é€å’Œæ‹‰å–ä»£ç ï¼Ÿ](#11--å¦‚ä½•æ¨é€å’Œæ‹‰å–ä»£ç )
- [12. ğŸ’» .gitignore æ–‡ä»¶çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ](#12--gitignore-æ–‡ä»¶çš„ä½œç”¨æ˜¯ä»€ä¹ˆ)
- [13. ğŸ’» demos.1 - React é¡¹ç›®çš„å®Œæ•´ Git å·¥ä½œæµ](#13--demos1---react-é¡¹ç›®çš„å®Œæ•´-git-å·¥ä½œæµ)
- [14. ğŸ”— å¼•ç”¨](#14--å¼•ç”¨)

<!-- endregion:toc -->

## 1. ğŸ¯ æœ¬èŠ‚å†…å®¹

- Git ç‰ˆæœ¬æ§åˆ¶çš„é‡è¦æ€§
- Git åŸºæœ¬å·¥ä½œæµç¨‹
- å¸¸ç”¨ Git å‘½ä»¤
- åˆ†æ”¯ç®¡ç†
- è¿œç¨‹ä»“åº“æ“ä½œ
- React é¡¹ç›®ä¸­çš„ Git å®è·µ

## 2. ğŸ«§ è¯„ä»·

æœ¬ç¬”è®°ä»‹ç»äº† Git ç‰ˆæœ¬æ§åˆ¶çš„åŸºç¡€çŸ¥è¯†ï¼Œå¯¹äº React å¼€å‘è€…æ¥è¯´ï¼ŒæŒæ¡ Git æ˜¯å›¢é˜Ÿåä½œçš„å¿…å¤‡æŠ€èƒ½ã€‚

- ç‰ˆæœ¬æ§åˆ¶ä¸æ˜¯å¯é€‰é¡¹ï¼Œè€Œæ˜¯ç°ä»£å‰ç«¯å¼€å‘çš„æ ‡é…ï¼Œå»ºè®®ä»é¡¹ç›®ç¬¬ä¸€è¡Œä»£ç å¼€å§‹å°±ä½¿ç”¨ Git
- åœ¨å®é™…å¼€å‘ä¸­ï¼Œåˆ†æ”¯ç­–ç•¥ï¼ˆå¦‚ Git Flowï¼‰èƒ½å¤Ÿè®©å¤šäººåä½œæ›´åŠ é¡ºç•…
- å…»æˆé¢‘ç¹æäº¤ã€ç¼–å†™æ¸…æ™°æäº¤ä¿¡æ¯çš„ä¹ æƒ¯ï¼Œèƒ½å¤Ÿå¸®åŠ©å›¢é˜Ÿè¿½è¸ªé—®é¢˜å’Œä»£ç å˜æ›´
- å¯¹äº React é¡¹ç›®ï¼ŒåŠ¡å¿…æ­£ç¡®é…ç½® `.gitignore`ï¼Œé¿å…å°† `node_modules` ç­‰ç›®å½•æäº¤åˆ°ä»“åº“

## 3. ğŸ¤” ä¸ºä»€ä¹ˆ React é¡¹ç›®éœ€è¦ç‰ˆæœ¬æ§åˆ¶ï¼Ÿ

- ä»£ç å†å²è¿½è¸ª
  - è®°å½•æ¯æ¬¡ä¿®æ”¹çš„å†…å®¹ã€æ—¶é—´å’Œä½œè€…
  - å¯ä»¥éšæ—¶å›é€€åˆ°ä¹‹å‰çš„ä»»ä½•ç‰ˆæœ¬
  - æ–¹ä¾¿æŸ¥æ‰¾ bug æ˜¯åœ¨å“ªæ¬¡æäº¤ä¸­å¼•å…¥çš„
- å›¢é˜Ÿåä½œ
  - å¤šäººå¯ä»¥åŒæ—¶å¼€å‘ä¸åŒåŠŸèƒ½
  - é€šè¿‡åˆ†æ”¯éš”ç¦»ä¸åŒçš„å¼€å‘ä»»åŠ¡
  - å†²çªè§£å†³æœºåˆ¶ä¿è¯ä»£ç çš„å®Œæ•´æ€§
- å¤‡ä»½ä¸æ¢å¤
  - ä»£ç å­˜å‚¨åœ¨è¿œç¨‹ä»“åº“ï¼Œé¿å…æœ¬åœ°ä¸¢å¤±
  - è¯¯åˆ æ–‡ä»¶å¯ä»¥è½»æ¾æ¢å¤
- æŒç»­é›†æˆä¸éƒ¨ç½²
  - é…åˆ CI/CD å·¥å…·å®ç°è‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²
  - åŸºäºç‰¹å®šåˆ†æ”¯æˆ–æ ‡ç­¾è§¦å‘éƒ¨ç½²æµç¨‹

## 4. ğŸ¤” Git çš„åŸºæœ¬å·¥ä½œæµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ

Git çš„å·¥ä½œæµç¨‹å¯ä»¥ç®€åŒ–ä¸ºä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š

```mermaid
graph TB
    A[å·¥ä½œåŒº<br/>Working Directory] -->|git add| B[æš‚å­˜åŒº<br/>Staging Area]
    B -->|git commit| C[æœ¬åœ°ä»“åº“<br/>Local Repository]
    C -->|git push| D[è¿œç¨‹ä»“åº“<br/>Remote Repository]
    D -->|git pull| A
```

- å·¥ä½œåŒºï¼ˆWorking Directoryï¼‰
  - ä½ å®é™…ç¼–è¾‘ä»£ç çš„ç›®å½•
  - åŒ…å«é¡¹ç›®çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹
- æš‚å­˜åŒºï¼ˆStaging Area / Indexï¼‰
  - ä¸´æ—¶å­˜å‚¨å³å°†æäº¤çš„ä¿®æ”¹
  - ä½¿ç”¨ `git add` å°†ä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜åŒº
- æœ¬åœ°ä»“åº“ï¼ˆLocal Repositoryï¼‰
  - å­˜å‚¨é¡¹ç›®å®Œæ•´çš„å†å²è®°å½•
  - ä½¿ç”¨ `git commit` å°†æš‚å­˜åŒºçš„å†…å®¹æäº¤åˆ°æœ¬åœ°ä»“åº“
- è¿œç¨‹ä»“åº“ï¼ˆRemote Repositoryï¼‰
  - æ‰˜ç®¡åœ¨ GitHubã€GitLab ç­‰å¹³å°
  - ä½¿ç”¨ `git push` æ¨é€åˆ°è¿œç¨‹ï¼Œä½¿ç”¨ `git pull` æ‹‰å–æ›´æ–°

## 5. ğŸ¤” å¦‚ä½•åˆå§‹åŒ–ä¸€ä¸ª Git ä»“åº“ï¼Ÿ

åœ¨ React é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š

```bash
# åˆå§‹åŒ– Git ä»“åº“
git init

# æŸ¥çœ‹å½“å‰çŠ¶æ€
git status
```

æ‰§è¡Œ `git init` åï¼ŒGit ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªéšè—çš„ `.git` æ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜å‚¨ç‰ˆæœ¬æ§åˆ¶ä¿¡æ¯ã€‚

å¦‚æœä½¿ç”¨ `create-react-app` æˆ– `vite` åˆ›å»ºé¡¹ç›®ï¼Œé€šå¸¸ä¼šè‡ªåŠ¨åˆå§‹åŒ– Git ä»“åº“ã€‚

## 6. ğŸ¤” å¦‚ä½•æš‚å­˜å’Œæäº¤ä»£ç ï¼Ÿ

```bash
# æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€
git status

# æ·»åŠ å•ä¸ªæ–‡ä»¶åˆ°æš‚å­˜åŒº
git add src/App.jsx

# æ·»åŠ æ‰€æœ‰ä¿®æ”¹åˆ°æš‚å­˜åŒº
git add .

# æäº¤åˆ°æœ¬åœ°ä»“åº“
git commit -m "feat: æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½"

# æ·»åŠ å¹¶æäº¤ï¼ˆåˆå¹¶æ“ä½œï¼‰
git commit -am "fix: ä¿®å¤æŒ‰é’®ç‚¹å‡» bug"
```

æäº¤ä¿¡æ¯è§„èŒƒå»ºè®®ï¼š

- `feat: æ–°åŠŸèƒ½`
- `fix: ä¿®å¤ bug`
- `docs: æ–‡æ¡£æ›´æ–°`
- `style: ä»£ç æ ¼å¼è°ƒæ•´`
- `refactor: é‡æ„ä»£ç `
- `test: æµ‹è¯•ç›¸å…³`
- `chore: æ„å»ºæˆ–è¾…åŠ©å·¥å…·å˜åŠ¨`

## 7. ğŸ¤” å¦‚ä½•æŸ¥çœ‹æäº¤å†å²ï¼Ÿ

```bash
# æŸ¥çœ‹å®Œæ•´æäº¤å†å²
git log

# æŸ¥çœ‹ç®€æ´ç‰ˆæœ¬ï¼ˆæ¨èï¼‰
git log --oneline

# æŸ¥çœ‹æœ€è¿‘ 5 æ¡æäº¤
git log -5

# æŸ¥çœ‹å›¾å½¢åŒ–åˆ†æ”¯å†å²
git log --oneline --graph --all

# æŸ¥çœ‹æŸä¸ªæ–‡ä»¶çš„ä¿®æ”¹å†å²
git log src/App.jsx
```

## 8. ğŸ¤” å¦‚ä½•åˆ›å»ºå’Œåˆ‡æ¢åˆ†æ”¯ï¼Ÿ

```bash
# æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯
git branch

# åˆ›å»ºæ–°åˆ†æ”¯
git branch feature-login

# åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯
git checkout feature-login

# åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ï¼ˆæ¨èï¼‰
git checkout -b feature-login

# Git 2.23+ æ–°å‘½ä»¤ï¼ˆæ›´ç›´è§‚ï¼‰
git switch feature-login
git switch -c feature-login
```

åˆ†æ”¯å‘½åå»ºè®®ï¼š

- `main` / `master` - ä¸»åˆ†æ”¯
- `develop` - å¼€å‘åˆ†æ”¯
- `feature/åŠŸèƒ½å` - åŠŸèƒ½åˆ†æ”¯
- `bugfix/é—®é¢˜æè¿°` - ä¿®å¤åˆ†æ”¯
- `hotfix/ç´§æ€¥ä¿®å¤` - ç´§æ€¥ä¿®å¤åˆ†æ”¯

## 9. ğŸ¤” å¦‚ä½•åˆå¹¶åˆ†æ”¯ï¼Ÿ

```bash
# åˆ‡æ¢åˆ°ç›®æ ‡åˆ†æ”¯ï¼ˆå¦‚ mainï¼‰
git checkout main

# åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯
git merge feature-login

# å¦‚æœæœ‰å†²çªï¼Œéœ€è¦æ‰‹åŠ¨è§£å†³åæäº¤
git add .
git commit -m "merge: åˆå¹¶ feature-login åˆ†æ”¯"

# åˆ é™¤å·²åˆå¹¶çš„åˆ†æ”¯
git branch -d feature-login

# å¼ºåˆ¶åˆ é™¤åˆ†æ”¯ï¼ˆå³ä½¿æœªåˆå¹¶ï¼‰
git branch -D feature-login
```

## 10. ğŸ¤” å¦‚ä½•è¿æ¥è¿œç¨‹ä»“åº“ï¼Ÿ

```bash
# æŸ¥çœ‹è¿œç¨‹ä»“åº“
git remote -v

# æ·»åŠ è¿œç¨‹ä»“åº“
git remote add origin https://github.com/username/repo.git

# æˆ–ä½¿ç”¨ SSH
git remote add origin git@github.com:username/repo.git

# ä¿®æ”¹è¿œç¨‹ä»“åº“åœ°å€
git remote set-url origin https://github.com/username/new-repo.git

# åˆ é™¤è¿œç¨‹ä»“åº“
git remote remove origin
```

## 11. ğŸ¤” å¦‚ä½•æ¨é€å’Œæ‹‰å–ä»£ç ï¼Ÿ

```bash
# æ¨é€åˆ°è¿œç¨‹ä»“åº“
git push origin main

# é¦–æ¬¡æ¨é€ï¼Œè®¾ç½®ä¸Šæ¸¸åˆ†æ”¯
git push -u origin main

# ä¹‹åå¯ä»¥ç®€å†™ä¸º
git push

# æ‹‰å–è¿œç¨‹æ›´æ–°
git pull origin main

# æ‹‰å–å¹¶å˜åŸºï¼ˆä¿æŒæäº¤å†å²æ•´æ´ï¼‰
git pull --rebase origin main

# è·å–è¿œç¨‹æ›´æ–°ä½†ä¸åˆå¹¶
git fetch origin
```

## 12. ğŸ’» .gitignore æ–‡ä»¶çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ

`.gitignore` ç”¨äºæŒ‡å®š Git åº”è¯¥å¿½ç•¥çš„æ–‡ä»¶å’Œç›®å½•ï¼Œé¿å…å°†ä¸å¿…è¦çš„æ–‡ä»¶æäº¤åˆ°ä»“åº“ã€‚

React é¡¹ç›®å…¸å‹çš„ `.gitignore` é…ç½®ï¼š

```gitignore
# ä¾èµ–ç›®å½•
node_modules/
/.pnp
.pnp.js

# æ„å»ºäº§ç‰©
/build
/dist
.cache

# ç¯å¢ƒå˜é‡
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# æ—¥å¿—
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*

# ç¼–è¾‘å™¨
.vscode/
.idea/
*.swp
*.swo
*~

# æ“ä½œç³»ç»Ÿ
.DS_Store
Thumbs.db

# æµ‹è¯•è¦†ç›–ç‡
/coverage
```

## 13. ğŸ’» demos.1 - React é¡¹ç›®çš„å®Œæ•´ Git å·¥ä½œæµ

å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ª React é¡¹ç›®ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„å·¥ä½œæµç¤ºä¾‹ï¼š

```bash
# 1. åˆ›å»º React é¡¹ç›®
npm create vite@latest my-react-app -- --template react
cd my-react-app

# 2. åˆå§‹åŒ– Gitï¼ˆvite å·²è‡ªåŠ¨åˆå§‹åŒ–ï¼‰
git status

# 3. é¦–æ¬¡æäº¤
git add .
git commit -m "chore: åˆå§‹åŒ–é¡¹ç›®"

# 4. è¿æ¥è¿œç¨‹ä»“åº“
git remote add origin https://github.com/username/my-react-app.git
git push -u origin main

# 5. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature-user-profile

# 6. å¼€å‘åŠŸèƒ½
# ... ç¼–å†™ä»£ç  ...

# 7. æš‚å­˜å¹¶æäº¤
git add src/components/UserProfile.jsx
git commit -m "feat: æ·»åŠ ç”¨æˆ·èµ„æ–™ç»„ä»¶"

# 8. æ¨é€åŠŸèƒ½åˆ†æ”¯
git push -u origin feature-user-profile

# 9. åœ¨ GitHub ä¸Šåˆ›å»º Pull Request

# 10. ä»£ç å®¡æŸ¥é€šè¿‡åï¼Œåˆå¹¶åˆ° main
git checkout main
git pull origin main
git merge feature-user-profile

# 11. æ¨é€åˆå¹¶ç»“æœ
git push origin main

# 12. åˆ é™¤åŠŸèƒ½åˆ†æ”¯
git branch -d feature-user-profile
git push origin --delete feature-user-profile
```

å¸¸è§å·¥ä½œåœºæ™¯ï¼š

```bash
# åœºæ™¯ 1ï¼šä¸´æ—¶ä¿å­˜å½“å‰å·¥ä½œï¼ˆæœªå®Œæˆï¼‰
git stash
git checkout main
# ... å¤„ç†å…¶ä»–äº‹æƒ… ...
git checkout feature-user-profile
git stash pop

# åœºæ™¯ 2ï¼šæ’¤é”€æœ€åä¸€æ¬¡æäº¤ï¼ˆä¿ç•™ä¿®æ”¹ï¼‰
git reset --soft HEAD~1

# åœºæ™¯ 3ï¼šæ’¤é”€æœ€åä¸€æ¬¡æäº¤ï¼ˆä¸¢å¼ƒä¿®æ”¹ï¼‰âš ï¸ å±é™©æ“ä½œ
git reset --hard HEAD~1

# åœºæ™¯ 4ï¼šä¿®æ”¹æœ€åä¸€æ¬¡æäº¤ä¿¡æ¯
git commit --amend -m "feat: æ·»åŠ ç”¨æˆ·èµ„æ–™ç»„ä»¶ï¼ˆæ”¯æŒå¤´åƒä¸Šä¼ ï¼‰"

# åœºæ™¯ 5ï¼šæŸ¥çœ‹æŸä¸ªæäº¤çš„è¯¦ç»†å†…å®¹
git show <commit-hash>

# åœºæ™¯ 6ï¼šæ¯”è¾ƒå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„å·®å¼‚
git diff

# åœºæ™¯ 7ï¼šæ¯”è¾ƒæš‚å­˜åŒºå’Œæœ¬åœ°ä»“åº“çš„å·®å¼‚
git diff --staged
```

## 14. ğŸ”— å¼•ç”¨

- [Git å®˜æ–¹æ–‡æ¡£][1]
- [GitHub Docs - Git åŸºç¡€][2]
- [Pro Git ç”µå­ä¹¦ï¼ˆä¸­æ–‡ç‰ˆï¼‰][3]
- [Git å¯è§†åŒ–å­¦ä¹ å·¥å…·][4]
- [å¸¸ç”¨ Git å‘½ä»¤æ¸…å•][5]

[1]: https://git-scm.com/doc
[2]: https://docs.github.com/zh/get-started/using-git/about-git
[3]: https://git-scm.com/book/zh/v2
[4]: https://learngitbranching.js.org/?locale=zh_CN
[5]: https://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html
