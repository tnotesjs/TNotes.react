# [0044. react element æ˜¯åªè¯»çš„](https://github.com/tnotesjs/TNotes.react/tree/main/notes/0044.%20react%20element%20%E6%98%AF%E5%8F%AA%E8%AF%BB%E7%9A%84)

<!-- region:toc -->

- [1. ğŸ«§ è¯„ä»·](#1--è¯„ä»·)
- [2. ğŸ’» demos.1 - react element æ˜¯åªè¯»çš„](#2--demos1---react-element-æ˜¯åªè¯»çš„)
- [3. ğŸ†š å¯¹æ¯” demos.1 ä¸­çš„ä¸¤ç§æ­£ç¡®åšæ³•](#3--å¯¹æ¯”-demos1-ä¸­çš„ä¸¤ç§æ­£ç¡®åšæ³•)

<!-- endregion:toc -->

## 1. ğŸ«§ è¯„ä»·

- æ°¸è¿œä¸è¦å°è¯•å»ä¿®æ”¹ React Element çš„å±æ€§ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯é€šè¿‡æ¸²æŸ“æ–°çš„ React Element æˆ–ä½¿ç”¨ React çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼ˆstate æˆ– propsï¼‰æ¥æ›´æ–° UIã€‚

## 2. ğŸ’» demos.1 - react element æ˜¯åªè¯»çš„

::: code-group

<<< ./demos/1/assets/1.jsx [æ¸²æŸ“å¤´åƒ]

<<< ./demos/1/assets/2.jsx [âŒ å°è¯•ä¿®æ”¹ element.src æ›¿æ¢å›¾ç‰‡]

:::

- æœ€ç»ˆæ¸²æŸ“ç»“æœï¼š
  - ![å›¾ 0](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2025-06-24-09-58-39.png)
- `imgEle.props.src = '...'` âŒ
  - å½“æ‰§è¡Œåˆ°è¿™æ¡è¯­å¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½æ˜¯æƒ³è¦æ›¿æ¢å›¾ç‰‡çš„ srcï¼Œæ¢æˆå…¶ä»–çš„å›¾ç‰‡ï¼Œä½†æ˜¯è¿™ç§å†™æ³•æ˜¯é”™è¯¯çš„ã€‚
  - å¦‚æœæ‰§è¡Œåˆ°è¿™æ¡è¯­å¥ï¼Œåˆ™ä¼šæŠ›å‡ºé”™è¯¯æç¤ºï¼š`Uncaught TypeError: Cannot assign to read only property 'src' of object '#<Object>'`ï¼Œæé†’æˆ‘ä»¬ä¸èƒ½ç»™åªè¯»çš„å±æ€§èµ‹å€¼ã€‚
  - ![å›¾ 1](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2025-06-24-09-58-47.png)
- å†æ¥çœ‹ä¸€ä¸ªè®¡æ•°å™¨çš„ç¤ºä¾‹ï¼š

::: code-group

<<< ./demos/1/assets/3.jsx [âŒ é”™è¯¯åšæ³•]

:::

- `counter` ç»“æ„ï¼š
  - ![å›¾ 4](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2025-06-24-10-04-05.png)
  - åœ¨é”™è¯¯åšæ³•ä¸­ï¼Œè¯•å›¾ä¿®æ”¹ `counter.props.children` æ¥æ”¹å˜è®¡æ•°å™¨çš„å€¼ï¼Œè¿™ä¼šå¯¼è‡´é”™è¯¯ï¼Œå› ä¸º react element æ˜¯åªè¯»çš„ã€‚

::: code-group

<<< ./demos/1/assets/4.jsx [âœ… æ­£ç¡®åšæ³•-1]

:::

- æ­£ç¡®åšæ³•æœ€ç»ˆæ¸²æŸ“ç»“æœï¼š
  - ![å›¾ 2](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2025-06-24-09-59-01.png)
- è™½ç„¶ä¸Šè¿°æåˆ°çš„æ­£ç¡®åšæ³•å¯ä»¥è®©è®¡æ•°å™¨ demo æ­£å¸¸å·¥ä½œï¼Œä½†æ˜¯ï¼Œä¸Šè¿°å†™æ³•å…¶å®è¿˜æ˜¯å­˜åœ¨ä¸€äº›é—®é¢˜çš„ã€‚
  - æ¯æ¬¡é‡æ–° `render`ï¼Œéƒ½ä¼šæ‰“å°è¿™æ¡æ¶ˆæ¯ã€‚
    - ![å›¾ 3](https://cdn.jsdelivr.net/gh/tnotesjs/imgs@main/2025-06-24-09-59-15.png)
  - åœ¨ç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå‡ºç°çš„è¿™æ¡è­¦å‘Šä¿¡æ¯è¡¨æ˜ä½ æ­£åœ¨å°è¯•åœ¨ä¸€ä¸ªå·²ç»è¢« `createRoot` åˆå§‹åŒ–çš„å®¹å™¨ä¸Šè°ƒç”¨ `createRoot`ã€‚React ä¸å…è®¸å¯¹åŒä¸€ä¸ªå®¹å™¨å¤šæ¬¡è°ƒç”¨ `createRoot`ï¼Œè€Œæ˜¯åº”è¯¥ä¿ç•™å¯¹æ ¹å®ä¾‹çš„å¼•ç”¨ï¼Œå¹¶åœ¨éœ€è¦æ›´æ–°æ—¶è°ƒç”¨å…¶ `render` æ–¹æ³•ã€‚
- ä¿®æ”¹å»ºè®®ï¼š
  - åˆ›å»ºä¸€æ¬¡æ ¹å®ä¾‹å¹¶ä¿å­˜å¼•ç”¨ï¼šå°† `createRoot` çš„è°ƒç”¨ç§»å‡ºå®šæ—¶å™¨å¤–éƒ¨ï¼Œå¹¶ä¿å­˜è¿”å›çš„æ ¹å®ä¾‹ã€‚
  - ä½¿ç”¨çŠ¶æ€ç®¡ç†ï¼šæ¨èä½¿ç”¨ React çš„çŠ¶æ€ç®¡ç†åŠŸèƒ½ï¼ˆå¦‚ `useState`ï¼‰æ¥å¤„ç†ç»„ä»¶å†…éƒ¨çš„çŠ¶æ€å˜åŒ–ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å…¨å±€å˜é‡ã€‚
- ä¸‹é¢æ˜¯æ”¹è¿›åçš„è®¡æ•°å™¨ demo çš„ä»£ç ç¤ºä¾‹ï¼š

::: code-group

<<< ./demos/1/assets/5.jsx [âœ… æ­£ç¡®åšæ³•-2]

:::

- æ”¹è¿›ç‚¹ï¼š
  - çŠ¶æ€ç®¡ç†ï¼šä½¿ç”¨ `useState` æ¥ç®¡ç†è®¡æ•°å™¨çš„çŠ¶æ€ã€‚
  - å‰¯ä½œç”¨å¤„ç†ï¼šä½¿ç”¨ `useEffect` æ¥è®¾ç½®å’Œæ¸…é™¤å®šæ—¶å™¨ï¼Œç¡®ä¿ç»„ä»¶å¸è½½æ—¶æ¸…ç†å®šæ—¶å™¨ã€‚
  - å•æ¬¡åˆå§‹åŒ–ï¼šåªè°ƒç”¨ä¸€æ¬¡ `createRoot` å¹¶ä¿å­˜å…¶å¼•ç”¨ï¼Œé¿å…é‡å¤åˆå§‹åŒ–ã€‚
- è¿™æ ·å¯ä»¥é¿å…è­¦å‘Šï¼Œå¹¶ä¸”ä»£ç æ›´åŠ ç¬¦åˆ React çš„æœ€ä½³å®è·µã€‚

## 3. ğŸ†š å¯¹æ¯” demos.1 ä¸­çš„ä¸¤ç§æ­£ç¡®åšæ³•

- å¦‚æœä½ ä¹ æƒ¯å‘½ä»¤å¼ç¼–ç¨‹ï¼Œåˆä¸ç†Ÿæ‚‰ react ç‰¹æ€§ï¼Œå¾ˆå¯èƒ½ä¼šå†™å‡ºç±»ä¼¼ 1 è¿™æ ·çš„ç¨‹åºï¼Œè™½è¯´ä¹Ÿèƒ½è·‘ä¸å‡ï¼Œä½†æ˜¯è¿™ä¹ˆåšåœ¨å®é™…é¡¹ç›®ä¸­æ˜¯éå¸¸ä¸æ¨èçš„ã€‚
- ä¸‹é¢æ˜¯ä»ä¸åŒç»´åº¦å¯¹ä¸¤ç§å†™æ³•è¿›è¡Œçš„å¯¹æ¯”ï¼š

| ç»´åº¦ | 1 | 2 |
| --- | --- | --- |
| å†™æ³•ç±»å‹ | çº¯ JS + React API æ‰‹åŠ¨æ¸²æŸ“ | React ç»„ä»¶å¼å†™æ³• |
| èŒƒå¼ | å‘½ä»¤å¼ï¼ˆåæ¨¡å¼ï¼‰ | å£°æ˜å¼ï¼ˆæ›´ç¬¦åˆ React æ€æƒ³ï¼‰ |
| æ˜¯å¦ä½¿ç”¨ React çŠ¶æ€æœºåˆ¶ | âŒ å¦ | âœ… æ˜¯ |
| æ˜¯å¦è§¦å‘ React diff | âŒ å¦ | âœ… æ˜¯ |
| çŠ¶æ€å­˜å‚¨ | ç”±å¤–éƒ¨å˜é‡ `num` ä¿å­˜ | ä½¿ç”¨ React çŠ¶æ€ `useState` ä¿å­˜ |
| æ¸²æŸ“æœºåˆ¶ | æ¯æ¬¡ `setInterval` éƒ½é‡æ–°åˆ›å»º root å¹¶å¼ºåˆ¶æ¸²æŸ“æ•´ä¸ª DOM æ ‘ | React æ ¹æ®çŠ¶æ€å˜åŒ–è§¦å‘å†…éƒ¨ diff å’Œæ›´æ–° |
| æ˜¯å¦å¤ç”¨ React Fiber æ ‘ | âŒ å¦ï¼Œæ¯æ¬¡é‡å»º Fiber æ ‘ | âœ… æ˜¯ï¼ŒReact å†…éƒ¨ä¼š diffã€å¤ç”¨èŠ‚ç‚¹ |
| æ€§èƒ½ | å¾ˆå·®ï¼Œæ¯ç§’é”€æ¯å¹¶é‡å»º DOM | é«˜æ•ˆï¼Œä»…æ›´æ–°å˜åŒ–éƒ¨åˆ† |
| æ˜¯å¦æœ‰å‰¯ä½œç”¨æ¸…ç†æœºåˆ¶ | âŒ æ— æ¸…ç†ï¼Œä¼šä¸æ–­å åŠ  root | âœ… æœ‰ `useEffect` æ¸…ç†é€»è¾‘ |
