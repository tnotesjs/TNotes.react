# [0021. ç»„ä»¶çš„åŸºæœ¬ç»„æˆåŠæ ¸å¿ƒæ¦‚å¿µ](https://github.com/tnotesjs/TNotes.react/tree/main/notes/0021.%20%E7%BB%84%E4%BB%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90%E5%8F%8A%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5)

<!-- region:toc -->

- [1. ğŸ¯ æœ¬èŠ‚å†…å®¹](#1--æœ¬èŠ‚å†…å®¹)
- [2. ğŸ«§ è¯„ä»·](#2--è¯„ä»·)
- [3. ğŸ¤” ç»„ä»¶çš„ 3 å¤§åŸºæœ¬ç»„æˆç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ](#3--ç»„ä»¶çš„-3-å¤§åŸºæœ¬ç»„æˆç»“æ„æ˜¯ä»€ä¹ˆ)
- [4. ğŸ¤” ç»„ä»¶çš„ç±»å‹éƒ½æœ‰å“ªäº›ï¼Ÿï¼ˆæ•°æ®ç±»å‹å±‚é¢ï¼‰](#4--ç»„ä»¶çš„ç±»å‹éƒ½æœ‰å“ªäº›æ•°æ®ç±»å‹å±‚é¢)
- [5. ğŸ¤” â€œå‡½æ•°ç»„ä»¶â€å’Œâ€œç±»ç»„ä»¶â€çš„åŸºæœ¬å†™æ³•æ˜¯ä»€ä¹ˆï¼Ÿ](#5--å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶çš„åŸºæœ¬å†™æ³•æ˜¯ä»€ä¹ˆ)
- [6. ğŸ¤” ç»„ä»¶çš„â€œå±æ€§â€æ˜¯ä»€ä¹ˆï¼Ÿ](#6--ç»„ä»¶çš„å±æ€§æ˜¯ä»€ä¹ˆ)
- [7. ğŸ¤” ç»„ä»¶çš„â€œçŠ¶æ€â€æ˜¯ä»€ä¹ˆï¼Ÿ](#7--ç»„ä»¶çš„çŠ¶æ€æ˜¯ä»€ä¹ˆ)
- [8. ğŸ¤” ç»„ä»¶çš„â€œç”Ÿå‘½å‘¨æœŸâ€æ˜¯ä»€ä¹ˆï¼Ÿ](#8--ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆ)
- [9. ğŸ¤” ç»„ä»¶çš„â€œäº‹ä»¶â€æ˜¯ä»€ä¹ˆï¼Ÿ](#9--ç»„ä»¶çš„äº‹ä»¶æ˜¯ä»€ä¹ˆ)
- [10. ğŸ¤” ç»„ä»¶çš„â€œæ¨¡æ¿è¯­æ³•â€æ˜¯ä»€ä¹ˆï¼Ÿ](#10--ç»„ä»¶çš„æ¨¡æ¿è¯­æ³•æ˜¯ä»€ä¹ˆ)
- [11. ğŸ¤” ç»„ä»¶çš„â€œContextâ€æ˜¯ä»€ä¹ˆï¼Ÿ](#11--ç»„ä»¶çš„contextæ˜¯ä»€ä¹ˆ)
- [12. ğŸ¤” ç»„ä»¶çš„â€œHooksâ€æ˜¯ä»€ä¹ˆï¼Ÿ](#12--ç»„ä»¶çš„hooksæ˜¯ä»€ä¹ˆ)

<!-- endregion:toc -->

## 1. ğŸ¯ æœ¬èŠ‚å†…å®¹

- ç»„ä»¶çš„åŸºæœ¬ç»„æˆ

## 2. ğŸ«§ è¯„ä»·

- æœ¬èŠ‚ä¸­æ¶‰åŠåˆ°çš„å¾ˆå¤šæ¦‚å¿µéƒ½æ˜¯é€šç”¨çš„ï¼Œå…¶å®ƒæ¡†æ¶ï¼ˆæ¯”å¦‚ vueï¼‰ä¸­çš„ç»„ä»¶ä¹Ÿæ˜¯å¦‚æ­¤ã€‚
- æœ¬èŠ‚ä»…å¯¹è¿™äº›æ ¸å¿ƒæ¦‚å¿µåšä¸€ä¸ªç®€å•çš„ä»‹ç»ï¼Œç›¸å…³è¯¦ç»†å†…å®¹è¯·å‚é˜…å…¶å®ƒç¬”è®°å†…å®¹ã€‚

## 3. ğŸ¤” ç»„ä»¶çš„ 3 å¤§åŸºæœ¬ç»„æˆç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ

- åœ¨ React ä¸­ï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥ç”±å¤šä¸ªéƒ¨åˆ†ç»„æˆï¼Œè¿™äº›éƒ¨åˆ†å…±åŒå®šä¹‰äº†ç»„ä»¶çš„ ç»“æ„ã€å¤–è§‚ ä»¥åŠ è¡Œä¸ºã€‚
  - ç»“æ„ -> æŒ‡çš„æ˜¯ç»„ä»¶çš„ HTML ç»“æ„ï¼ŒåŒ…æ‹¬æ ‡ç­¾ã€å±æ€§ã€æ–‡æœ¬å†…å®¹ç­‰ï¼Œè¿™éƒ¨åˆ†é€šå¸¸ç”± JSX æ¥æè¿°ã€‚
  - å¤–è§‚ -> æŒ‡çš„æ˜¯ç»„ä»¶çš„æ ·å¼ã€å¸ƒå±€ã€åŠ¨ç”»ç­‰ï¼Œè¿™éƒ¨åˆ†ç”± CSS æ¥æè¿°ã€‚
  - è¡Œä¸º -> æŒ‡çš„æ˜¯ç»„ä»¶çš„é€»è¾‘ï¼Œæ¯”å¦‚ä¸ç”¨æˆ·å’Œå…¶ä»–ç»„ä»¶çš„äº¤äº’æ–¹å¼ç­‰ï¼Œè¿™éƒ¨åˆ†ç”± JavaScript æ¥æè¿°ã€‚
- ä¸Šè¿°æåˆ°çš„ 3 ä¸ªåŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼Œå…¶å®å°±æ˜¯å‰ç«¯ä¸‰ä»¶å¥— htmlã€cssã€jsã€‚
  - html <-> â€œç»“æ„â€
  - css <-> â€œæ ·å¼â€
  - js <-> â€œè¡Œä¸ºâ€

## 4. ğŸ¤” ç»„ä»¶çš„ç±»å‹éƒ½æœ‰å“ªäº›ï¼Ÿï¼ˆæ•°æ®ç±»å‹å±‚é¢ï¼‰

- å‡½æ•°ç»„ä»¶
- ç±»ç»„ä»¶

## 5. ğŸ¤” â€œå‡½æ•°ç»„ä»¶â€å’Œâ€œç±»ç»„ä»¶â€çš„åŸºæœ¬å†™æ³•æ˜¯ä»€ä¹ˆï¼Ÿ

```jsx
// å‡½æ•°ç»„ä»¶
// å‡½æ•°ç»„ä»¶æ˜¯ä½¿ç”¨ JavaScript å‡½æ•°æ¥å®šä¹‰çš„ç»„ä»¶ã€‚
// å‡½æ•°ç»„ä»¶é€šå¸¸ä½¿ç”¨ function å…³é”®å­—æˆ–ç®­å¤´å‡½æ•°æ¥å£°æ˜ï¼Œå¹¶ä¸”è¿”å› JSX ä»£ç ã€‚
function MyComponent() {
  return <div>Hello, world!</div>
}

// ç±»ç»„ä»¶
// ç±»ç»„ä»¶æ˜¯ä½¿ç”¨ ES6 ç±»ï¼ˆclassï¼‰è¯­æ³•å®šä¹‰çš„ç»„ä»¶ã€‚
// ç±»ç»„ä»¶ç»§æ‰¿è‡ª React.Component å¹¶ä¸”å¿…é¡»å®ç° render æ–¹æ³•ã€‚
class MyComponent extends React.Component {
  render() {
    return <div>Hello, world!</div>
  }
}
```

## 6. ğŸ¤” ç»„ä»¶çš„â€œå±æ€§â€æ˜¯ä»€ä¹ˆï¼Ÿ

- ç»„ä»¶çš„å±æ€§ - `Props`
  - Props æ˜¯ä»çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„æ•°æ®ã€‚
  - Props æ˜¯åªè¯»çš„ï¼Œæ„å‘³ç€å­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ Propsã€‚

```jsx
// å‡½æ•°ç»„ä»¶
// åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œprops ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚
function MyComponent(props) {
  return <div>{props.message}</div>
}

// ç±»ç»„ä»¶
// åœ¨ç±»ç»„ä»¶ä¸­ï¼Œprops é€šè¿‡ this.props è®¿é—®ã€‚
class MyComponent extends React.Component {
  render() {
    return <div>{this.props.message}</div>
  }
}
```

## 7. ğŸ¤” ç»„ä»¶çš„â€œçŠ¶æ€â€æ˜¯ä»€ä¹ˆï¼Ÿ

- ç»„ä»¶çš„çŠ¶æ€ - `State`
  - State æ˜¯ç»„ä»¶å†…éƒ¨ç®¡ç†çš„æ•°æ®ï¼Œå®ƒå¯ä»¥åœ¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå†…è¢«æ”¹å˜ã€‚
  - å½“ State å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“ã€‚

```jsx
// å‡½æ•°ç»„ä»¶
// åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ useState é’©å­æ¥å£°æ˜ stateã€‚
import React, { useState } from 'react'

function MyComponent() {
  const [count, setCount] = useState(0)

  return (
    <div>
      <p>You clicked {count} times</p>
      <button onClick={() => setCount(count + 1)}>Click me</button>
    </div>
  )
}

// ç±»ç»„ä»¶
// åœ¨ç±»ç»„ä»¶ä¸­ï¼Œstate é€šè¿‡ this.state å’Œ this.setState æ¥ç®¡ç†å’Œæ›´æ–°ã€‚
class MyComponent extends React.Component {
  constructor(props) {
    super(props)
    this.state = { count: 0 }
  }

  render() {
    return (
      <div>
        <p>You clicked {this.state.count} times</p>
        <button onClick={() => this.setState({ count: this.state.count + 1 })}>
          Click me
        </button>
      </div>
    )
  }
}
```

## 8. ğŸ¤” ç»„ä»¶çš„â€œç”Ÿå‘½å‘¨æœŸâ€æ˜¯ä»€ä¹ˆï¼Ÿ

- ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å…è®¸ä½ åœ¨ç‰¹å®šæ—¶åˆ»æ‰§è¡Œé€»è¾‘ï¼Œä¾‹å¦‚ç»„ä»¶æŒ‚è½½ã€æ›´æ–°å’Œå¸è½½çš„æ—¶å€™ã€‚
- åœ¨ç±»ç»„ä»¶ä¸­ï¼Œæœ‰å¤šä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•å¦‚ `componentDidMount`, `componentDidUpdate`, `componentWillUnmount` ç­‰ã€‚
- åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ `useEffect` é’©å­æ¥æ›¿ä»£å¤§éƒ¨åˆ†çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚

## 9. ğŸ¤” ç»„ä»¶çš„â€œäº‹ä»¶â€æ˜¯ä»€ä¹ˆï¼Ÿ

- ç»„ä»¶çš„äº‹ä»¶ - `Events`
  - äº‹ä»¶å¤„ç†å…è®¸ä½ å“åº”ç”¨æˆ·çš„æ“ä½œï¼Œæ¯”å¦‚ç‚¹å‡»æŒ‰é’®ã€è¾“å…¥æ–‡æœ¬ç­‰ã€‚
  - åœ¨ JSX ä¸­ï¼Œä½ å¯ä»¥ä¸ºå…ƒç´ æ·»åŠ äº‹ä»¶å¤„ç†å™¨ï¼Œå®ƒä»¬é€šå¸¸æ˜¯å›è°ƒå‡½æ•°ã€‚

```jsx
// å‡½æ•°ç»„ä»¶
function MyComponent() {
  const handleClick = () => {
    console.log('Button was clicked!')
  }

  return <button onClick={handleClick}>Click me</button>
}

// ç±»ç»„ä»¶
class MyComponent extends React.Component {
  handleClick = () => {
    console.log('Button was clicked!')
  }

  render() {
    return <button onClick={this.handleClick}>Click me</button>
  }
}
```

## 10. ğŸ¤” ç»„ä»¶çš„â€œæ¨¡æ¿è¯­æ³•â€æ˜¯ä»€ä¹ˆï¼Ÿ

- ç»„ä»¶æ¨¡æ¿è¯­æ³• - JSX
- å¯¹æ¯” vue
  - åœ¨ vue ä¸­ï¼Œç»Ÿä¸€å°†ç»„ä»¶çš„ UI ç»“æ„å†™åœ¨ template æ ‡ç­¾ä¸­ã€‚
  - åœ¨ react ä¸­ï¼Œä½¿ç”¨ JSX è¯­æ³•æ¥å®šä¹‰ç»„ä»¶çš„æ¨¡æ¿ï¼Œä¹Ÿå°±æ˜¯ç»„ä»¶çš„ UI ç»“æ„ã€‚
- æ¯”å¦‚åœ¨å­¦ä¹  JSX ç« èŠ‚çš„æ—¶å€™æåˆ°çš„ï¼š
  - æ¡ä»¶æ¸²æŸ“
  - åˆ—è¡¨æ¸²æŸ“

```jsx
// æ¡ä»¶æ¸²æŸ“
// æ ¹æ®ä¸åŒçš„æ¡ä»¶æ˜¾ç¤ºæˆ–éšè—ç»„ä»¶çš„éƒ¨åˆ†å†…å®¹ã€‚
function Greeting(props) {
  const isLoggedIn = props.isLoggedIn
  if (isLoggedIn) {
    return <UserGreeting />
  }
  return <GuestGreeting />
}

// åˆ—è¡¨æ¸²æŸ“
// å½“ä½ éœ€è¦æ¸²æŸ“å¤šä¸ªç›¸ä¼¼çš„å…ƒç´ æ—¶ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨æ•°ç»„æ¥æ˜ å°„å¹¶åˆ›å»ºä¸€ç»„å…ƒç´ ã€‚
// æ¯ä¸ªå…ƒç´ éƒ½éœ€è¦ä¸€ä¸ªå”¯ä¸€çš„ key å±æ€§ï¼Œä»¥å¸®åŠ© React è¯†åˆ«å“ªäº›å…ƒç´ æ”¹å˜äº†ã€æ·»åŠ äº†æˆ–è€…åˆ é™¤äº†ã€‚
const numbers = [1, 2, 3, 4, 5]
const listItems = numbers.map((number) => (
  <li key={number.toString()}>{number}</li>
))
```

- å†æ¯”å¦‚åˆ©ç”¨ JSX æ¥ä¹¦å†™ç»„ä»¶çš„æ ·å¼ - `Style`
  - é€šè¿‡å†…è”æ ·å¼ `style` æ¥åº”ç”¨æ ·å¼
  - é€šè¿‡ CSS ç±»å `className` æ¥åº”ç”¨æ ·å¼

```jsx
function StyledComponent() {
  const containerStyle = {
    width: '300px',
    padding: '20px',
    backgroundColor: '#f0f0f0',
    borderRadius: '8px',
    fontFamily: 'Arial, sans-serif',
  }

  return (
    <div style={containerStyle}>
      <h2>Styled Component</h2>
      <p className="xxx">
        This is a simple example of inline styling in React.
      </p>
    </div>
  )
}
```

## 11. ğŸ¤” ç»„ä»¶çš„â€œContextâ€æ˜¯ä»€ä¹ˆï¼Ÿ

- è¿™æ˜¯è·Ÿç»„ä»¶çš„çŠ¶æ€ç®¡ç†ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼Œè¿™é‡Œå…ˆç®€å•äº†è§£ä¸€ä¸‹å³å¯ã€‚
- Context
  - Context æä¾›äº†ä¸€ç§åœ¨ç»„ä»¶æ ‘ä¸­ä¼ é€’æ•°æ®çš„æ–¹æ³•ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨å°† props é€å±‚ä¼ é€’ä¸‹å»ã€‚
  - ç®€å•ç†è§£ï¼šå°†ä¸€éƒ¨åˆ†æ•°æ®æå‡åˆ°å…¨å±€ï¼Œè®©æ‰€æœ‰ç»„ä»¶èƒ½å…±äº«è¿™äº›æ•°æ®ã€‚
- åŸºæœ¬ä½¿ç”¨
  - ä½¿ç”¨ `React.createContext()` åˆ›å»ºä¸€ä¸ª contextã€‚
  - ä½¿ç”¨ `<Provider>` æä¾›æ•°æ®ã€‚
  - ä½¿ç”¨ `<Consumer>` åœ¨å­ç»„ä»¶ä¸­æ¶ˆè´¹ context æ•°æ®ã€‚

```jsx
// ThemeContext.js
import { createContext } from 'react'

const ThemeContext = createContext('light') // é»˜è®¤å€¼ä¸º 'light'

export default ThemeContext

// App.jsx
import React, { useContext } from 'react'
import ThemeContext from './ThemeContext'

function ThemedButton() {
  const theme = useContext(ThemeContext)

  return (
    <button
      style={{
        background: theme === 'dark' ? '#333' : '#fff',
        color: theme === 'dark' ? '#fff' : '#333',
        border: '1px solid #999',
        padding: '8px 16px',
        cursor: 'pointer',
      }}
    >
      I am {theme} button
    </button>
  )
}

function App() {
  return (
    <ThemeContext.Provider value="dark">
      <ThemedButton />
    </ThemeContext.Provider>
  )
}

export default App
```

## 12. ğŸ¤” ç»„ä»¶çš„â€œHooksâ€æ˜¯ä»€ä¹ˆï¼Ÿ

- Hooks å…è®¸ä½ åœ¨ä¸ç¼–å†™ç±»çš„æƒ…å†µä¸‹ä½¿ç”¨ state å’Œå…¶ä»– React ç‰¹æ€§ã€‚
- å¸¸è§çš„ hooks åŒ…æ‹¬ `useState`, `useEffect`, `useContext`, `useReducer` ç­‰ã€‚

```jsx
import React, { useState, useEffect } from 'react'

function Counter() {
  const [count, setCount] = useState(0)

  // æ¨¡æ‹Ÿ componentDidMount å’Œ componentDidUpdate
  useEffect(() => {
    document.title = `You clicked ${count} times`

    // æ¨¡æ‹Ÿ componentWillUnmount
    return () => {
      document.title = 'React App'
    }
  }, [count]) // ä»…åœ¨ count å˜åŒ–æ—¶æ‰§è¡Œ

  return (
    <div>
      <p>You clicked {count} times</p>
      <button onClick={() => setCount(count + 1)}>Click me</button>
    </div>
  )
}
```

- Hooks ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œåœ¨åç»­ç¬”è®°ä¸­ä¼šé‡ç‚¹ä»‹ç»ã€‚
